# Quick Reference Guide

## Essential Commands

### Development Workflow
```bash
# Install dependencies
npm install

# Run tests
npm test

# Lint code
npm run lint

# Build distribution
npm run build  # MUST RUN before committing!

# Test locally with act
act pull_request -e tests/fixtures/pr-event.json
```

## Critical Files

### Never Edit Directly
- `dist/index.js` - Generated by build
- `package-lock.json` - Generated by npm
- `node_modules/` - Dependencies

### Always Update Together
- Source change ‚Üí Run build ‚Üí Commit both
- `src/*.js` ‚Üí `npm run build` ‚Üí `dist/index.js`

## Key Patterns

### Input Handling
```javascript
// ALWAYS use @actions/core
const input = core.getInput('name');

// ALWAYS provide defaults
const value = core.getInput('value') || 'default';

// ALWAYS validate
if (!isValid(input)) {
  throw new Error(`Invalid: ${input}`);
}
```

### Error Handling
```javascript
try {
  // Your code
} catch (error) {
  core.setFailed(`Failed: ${error.message}`);
}
```

### Emoji Detection
```javascript
// Unicode: ‚ú® üöÄ üìù
const EMOJI_REGEX = /\p{Emoji_Presentation}|\p{Emoji}\uFE0F/gu;

// Shortcodes: :sparkles: :rocket:
const SHORTCODE_REGEX = /:[a-zA-Z0-9_+-]+:/g;
```

## Testing Checklist

Before ANY commit:
- [ ] `npm test` passes
- [ ] `npm run lint` passes
- [ ] `npm run build` completed
- [ ] `dist/index.js` updated
- [ ] No console.log statements
- [ ] No hardcoded values

## Common Issues

### Build Not Updated
**Problem**: Forgot to run `npm run build`
**Solution**: Always build before commit
```bash
npm run build
git add dist/index.js
git commit
```

### Tests Failing
**Problem**: Regex not detecting emoji
**Solution**: Test regex at regex101.com with Unicode flag

### Action Not Running
**Problem**: `action.yml` invalid
**Solution**: Validate YAML syntax

## GitHub Action Inputs

### Required Structure
```yaml
name: 'Emoji Linter'
inputs:
  mode:
    description: 'Validation mode'
    required: false
    default: 'require'
runs:
  using: 'node20'
  main: 'dist/index.js'
```

## Validation Modes

| Mode | Description | Use Case |
|------|-------------|----------|
| `require` | Must have emoji | Enforce Gitmoji |
| `forbid` | No emojis allowed | Professional commits |
| `count` | Specific range | Controlled usage |

## Quick Debug

### See Full Error
```javascript
core.debug(error.stack);  // Hidden by default
core.info(error.message);  // Always visible
```

### Test Specific Mode
```yaml
- uses: ./
  with:
    mode: require
    target: pr-title
    min-emojis: 1
```

## Emergency Fixes

### Rollback Build
```bash
git checkout HEAD -- dist/index.js
npm run build
```

### Reset Dependencies
```bash
rm -rf node_modules package-lock.json
npm install
```

### Force Rebuild
```bash
rm -rf dist/
npm run build
```

## Release Process

1. Update version
```bash
npm version patch  # or minor/major
```

2. Build and test
```bash
npm run build
npm test
```

3. Commit and tag
```bash
git add -A
git commit -m "üîñ Release v1.0.1"
git tag v1.0.1
git push --tags
```

4. Create GitHub Release
- Go to Releases
- Create from tag
- Auto-generate notes

## Help Resources

- [GitHub Actions Docs](https://docs.github.com/en/actions)
- [@actions/toolkit](https://github.com/actions/toolkit)
- [Emoji Unicode Patterns](https://unicode.org/emoji/charts/full-emoji-list.html)
- [Gitmoji](https://gitmoji.dev/)

## Contact for Issues

- GitHub Issues: Report bugs
- GitHub Discussions: Ask questions
- Pull Requests: Contribute fixes